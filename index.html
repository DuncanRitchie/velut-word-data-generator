<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="A tool that Duncan Ritchie uses to generate data for the “words” collection in his Latin website, velut.">
	<title>Duncan’s Word Data Generator for velut</title>
	<base href="https://www.duncanritchie.co.uk/velut-word-data-generator/"/>
	<link rel="shortcut icon" href="https://www.duncanritchie.co.uk/favicon.ico" type="image/x-icon">
	<link rel="stylesheet" href="https://www.duncanritchie.co.uk/css/main.css" key="main">
	<link rel="stylesheet" href="https://www.duncanritchie.co.uk/css/subsites.css" key="subsites">
	<link rel="stylesheet" href="./main.css" key="subsite">
</head>
<body>
	<main>
		<h1>Duncan’s Word Data Generator for velut</h1>
		<div class="buttons">
			<button id="clear-inputs">Clear</button>
			<button id="load-sample-data">Load sample</button>
		</div>
		<label for="textarea-input">Paste from Excel here (or use sample):</label><br/>
		<textarea id="textarea-input"></textarea><br/>
		<div class="buttons">
			<span id="text-by-generate-json"></span>
			<button id="generate-json">Generate Json</button><br/>
		</div>
		<label for="textarea-output">Output Json:</label><br/>
		<textarea id="textarea-output" readonly></textarea>
		<div class="buttons">
			<span id="text-by-copy-to-clipboard"></span>
			<button id="copy-to-clipboard">Copy to clipboard</button>
			<button id="download">Download as file</button>
		</div>

		<section>
			<h2>Testing</h2>
			<p>
				Open your browser’s console, then click “Run tests”. The tests confirm that the behaviour of my data-generating functions is as I expect.
			</p>
			<button id="test">Run tests</button>
		</section>

		<section>
			<h2>About</h2>
			<p>
				This is a webpage that can generate data for my Latin rhyming dictionary, <a href="https://www.velut.co.uk/" title="velut — a Latin rhyming dictionary">velut</a>; specifically it generates the “words” data. For each word and corresponding list of lemmata, this generates fields such as the phonetic representation, the number of syllables, the rhyming-part, and strings that words are sorted on. The resultant Json can be downloaded (or copied to the clipboard). Once it’s on my hard drive, I have a script to upload it to the MongoDB database that the velut website uses.
			</p>

			<h3>Input and output format</h3>
			<p>
				Each line of input must be a word, whitespace, and the space-separated list of lemmata.
				The “Load sample” button will give you some examples; the examples use a tab for the whitespace between the word and the lemmata, because you get tabs when pasting from Excel cells.
				But you can use a normal space (or several) if you prefer.
			</p>

			<p>
				The Json generated does not have commas separating the objects, or square brackets around the entire array. This is not the standard Json format, but is the format required by mongoimport (which is the tool my script uses to import into the database).
			</p>

			<h3>The velut Excel file & how I’m getting rid of it</h3>
			<p>
				Although the velut website uses a MongoDB database, and this page produces Json data for the MongoDB database, I privately have a large Excel file for generating and storing the data in velut. This webpage is intended to replace a sheet called “wordsform” in that Excel file. The sheet can generate all the data from words and lemmata entered into the second and third columns — which is why the second and third fields of the output are Word and Lemmata, the two columns that don’t have Excel formulae.
			</p>

			<p>
				One of the differences between the “wordsform” sheet and this Word Data Generator is that in the sheet the output data are in Excel cells, but in the generator they’re in Json format. Copying data from Excel makes them tab-delimited. To convert the tab-delimited data to Json, I use my <a href="https://www.duncanritchie.co.uk/velut-json-generator">Json Generator</a>, which is a separate webpage. But I’ll hopefully have less need of that in the future, because the data from the Word Data Generator are already in Json format.
			</p>

			<p>
				I don’t yet use the Word Data Generator, for three reasons:
			</p>

			<ol>
				<li>
					I haven’t yet checked the output of the Word Data Generator against all the data I already have from Excel. So I expect some bugs will have been introduced in my attempts to re-write my Excel formulae as JavaScript functions.
					Having said that, I have tested all my JavaScript functions against some words, and I’ve further tested the two fiddliest functions (<code>Phonetic</code> and <code>Stress</code>) against a lot of the words that could befuddle them.
					(Click the “Run tests” button to see these tests running in your browser’s console.)
					So I expect that there’ll be very few bugs remaining, if any.
				</li>
				<li>
					If I were to run all my Latin words (more than 120 thousand) through this at once, my browser would freeze.
					I need to devise some strategy for splitting the data into batches, or indeed re-think the whole idea of having the Word Data Generator as a webpage.
				</li>
				<li>
					Much of my Excel file still relies on me having all the data in Excel — not in the Json format that this page produces.
				</li>
			</ol>

			<p>
				When I’m confident that this page gives the same output as my Excel formulae, for all the Latin words I have, and when enough of the rest of the Excel file is obsolete that I can stop storing all my data there in Excel, I will then stop using the “wordsform” sheet.
			</p>

			<p>
				It’s all part of my long-term project of converting my Excel file into websites and webpages that are easier to share and maintain. I’m very much in a transition period of using the Excel file for some things and my newer websites/webpages for others. But the Word Data Generator is another step in the process. At the moment, the whole velut project is very convoluted; in the future, it won’t be as bad.
			</p>

			<h3>Final note</h3>
			<p>
				If you’re not me, you’re unlikely to have much use for the Word Data Generator, but kudos to you for reading so far!
			</p>
		</section>
	</main>
	<footer>
		<ul>
			<li>
				<a href="https://www.duncanritchie.co.uk/" title="Duncan Ritchie’s website">Made by Duncan Ritchie</a>
			</li>
			<li>
				<a href="https://github.com/DuncanRitchie/velut-word-data-generator" title="Code for this page on GitHub">See the code</a>
			</li>
		</ul>
	</footer>
	<script src="./velut-wordsform-formulae.js"></script>
	<script src="./velut-phonetic-exceptions.js"></script>
	<script src="./velut-wordsform-functions.js"></script>
	<script src="./main.js"></script>
	<script src="./tests.js"></script>
</body>
</html>
